import {
  Meta,
  Story,
  Props,
  Preview,
  Title,
  DocsContainer
} from '@storybook/addon-docs/blocks'
import backgrounds from '../../../lib/backgrounds'
import { INITIAL_VIEWPORTS } from '@storybook/addon-viewport'

import Coil from './src/index.vue'

<Meta
  title='web/线圈'
  component={Coil}
  parameters={{ viewport: { disable: true }, backgrounds: backgrounds }}
/>

<Title>Coil</Title>

##### 基础用法

<Preview>
  <Story name='基础用法' height='420px'>
    {{
      components: { Coil },
      template: `<div>
        <Coil :width="400" :height="400" ref="coil" src="http://img.ikstatic.cn/MTU5MDU0NDQyMTA3MiM5NzAjanBn.jpg"/>
        <div>
          <button v-for="(it,i) in btns" 
            :key="i" 
            type="button" 
            @click="addShape(it.name)" 
            :style="{background:state === it.name ? '#ccc' :'#fff'}"
            >
              {{it.label}}
          </button>
        </div>
      </div>`,
      data () {
        return {
          state:null,
          btns:[
            {
              label:'多边形',
              name:'polygon'
            },
            {
              label:'矩形',
              name:'rect'
            },
            {
              label:'圆形',
              name:'ellipse'
            },
            {
              label:'打点',
              name:'dot'
            }
          ]
        }
      },
      methods:{
        addShape(type){
          const coil = this.$refs.coil
          let t = null
          if(this.state !== type){
            t = type
          }
          this.state = t
          coil.$setState(t)
        }
      },
      mounted (){
      }
    }}
  </Story>
</Preview>
